apply plugin: 'java'

apply plugin: 'application'

repositories {
    jcenter()
    mavenLocal();
}

dependencies {
    implementation "org.apache.commons:commons-lang3:3.8.1+"
    implementation "org.openjdk.jmc:org.openjdk.jmc.flightrecorder.configuration:7.0.0-SNAPSHOT"
    implementation "org.openjdk.jmc:org.openjdk.jmc.rjmx:7.0.0-SNAPSHOT"
    implementation "org.openjdk.jmc:org.openjdk.jmc.rjmx.services.jfr:7.0.0-SNAPSHOT"
    implementation "org.openjdk.jmc:org.openjdk.jmc.ui.common:7.0.0-SNAPSHOT"
    implementation "org.eclipse.core:runtime:3.10.0+"
    implementation "org.nanohttpd:nanohttpd:2.3.1+"
}

jar {
    manifest {
        attributes(
                'Main-Class': 'Listener'
                )
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'
}

mainClassName = 'es.andrewazor.containertest.JMXClient'
